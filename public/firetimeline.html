<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MaePing National Park Personal Assistant</title>
  <link rel="shortcut icon" type="image/jpg" href="https://img.icons8.com/emoji/48/000000/fire.png" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">

  <!-- JQuery -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>

  <link rel='stylesheet' type="text/css" href='/index.css'>
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

  <style>

  </style>

  <script type="module">
    import {
      LatLon
    } from 'https://cdn.jsdelivr.net/npm/geodesy@2/utm.js'

    function convertCoordinates(lat, long) {
      let latLongP = new LatLon(lat, long)
      let utmCoord = latLongP.toUtm()

      return utmCoord.toString()
    }

    console.log(convertCoordinates(15, 100))
  </script>

  <!-- Google Maps Scripting -->
  <script>
    let map;

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: {
          lat: 15.0,
          lng: 100.0
        },
        zoom: 7,
      });

      const icons = {
        day: {
          icon: "dayfire.png",
        },
        night: {
          icon: "nightfire.png",
        },
      };

      const markersOnMap = [{
          LatLng: [{
            lat: 15.3636,
            lng: 100.18719
          }],
          Date: "Date of Fire: 2021-03-08",
          timeOfDay: "Time of Day: Day - 06:48",
          dayOrNight: "Day or Night: D",
          type: "day",
        },
        {
          LatLng: [{
            lat: 16.97671,
            lng: 97.2366
          }],
          Date: "Date of Fire: 2021-03-08",
          timeOfDay: "Time of Day: Day - 06:54",
          dayOrNight: "Day or Night: N",
          type: "night",
        },
        {
          LatLng: [{
            lat: 17.25048,
            lng: 98.51827
          }],
          Date: "Date of Fire: 2021-03-08",
          timeOfDay: "Time of Day: Day - 06:54",
          dayOrNight: "Day or Night: D",
          type: "day",
        },
        {
          LatLng: [{
            lat: 17.91273,
            lng: 97.2955
          }],
          Date: "2021-03-08",
          timeOfDay: "06:54",
          dayOrNight: "N",
          type: "night",
        },
      ];

      //Create Markers
      for (let i = 0; i < markersOnMap.length; i++) {

        let parsedCoordinates = JSON.parse(JSON.stringify(markersOnMap[i].LatLng[0]))

        //console.log(test["lat"])
        //console.log(test["lng"])
        //console.log(convertCoordinates(parsedCoordinates["lat"], parsedCoordinates["lng"]))

        let coords = "<p><b> Latitude: </b>" + parsedCoordinates["lat"] + "<b> Longitude: </b>" + parsedCoordinates["lng"] + "</p>"
        let date = "<p><b>Date of Fire: </b>" + markersOnMap[i].Date + "</p>"
        let time = "<p><b>Time of Day: </b>" + markersOnMap[i].timeOfDay + "</p>"
        let dOrN = "<p><b>Day or Night: </b>" + markersOnMap[i].dayOrNight + "</p>"

        const marker = new google.maps.Marker({
          position: markersOnMap[i].LatLng[0],
          icon: icons[markersOnMap[i].type].icon,
          map: map,
        });

        let infowindow = new google.maps.InfoWindow({
          content: "<h6>Fire Information</h6>" + coords + date + time + dOrN,
        });

        marker.addListener("click", function() {
          infowindow.open(map, marker)
        });
      }
    }
  </script>

</head>


<body>
  <div class="container">
    <nav class="mdb-navbar navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a id="link" class="navbar-brand" href="Home">MaePing FirePA</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-haspopup="true" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a id="link" class="nav-link active" aria-current="page" href="Home">Home</a>
            </li>
            <li class="nav-item">
              <a id="link" class="nav-link" href="LINE">About LINE Official Account</a>
            </li>
            <li class="nav-item">
              <a id="link" class="nav-link" href="Fire Timeline"> Nasa FIRMS</a>
            </li>
            <li class="nav-item">
              <a id="link" class="nav-link" href="CuSense">CuSense</a>
            </li>
            <li class="nav-item">
              <a id="link" class="nav-link" href="Windy">Windy</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>

  <div id="Fire Timeline" class=" animated fadeInUp">
    <div class="container animated fadeInUp slow" id="jumbo">
      <div class="jumbotron animated fadeInUp">
        <div class="container-sm" id="center">
          <h3 class="display-4">Nasa FIRMS Fire Timeline Tool</h3>
        </div>
        <div id="map" class="center container-fluid"></div>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3KYwKVRO-jV0NFiGHlTc5qXuKlO9OT_w&callback=initMap&libraries=&v=weekly" async></script>
        <br>
        <div class="container-sm">
          <h4 class="display-4">Directions</h4>
          <ol>
            <li>Use your mouse (On Web) or Finger (On Mobile) to move around the map</li>
            <li> Click on the fire Icons to view information about occured fires</li>
            <li>Red fire icons on the map indicate fires that are occuring during the day</li>
            <li>Black Icons on the map indicate fires that are occuring during the night</li>
          </ol>

        </div>

      </div>
    </div>
  </div>

</body>

</html>